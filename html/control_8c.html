<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Elevator project for group 24: source/control.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Elevator project for group 24
   </div>
   <div id="projectbrief">The source code for the elevator project in TTK4235 - &#39;Tilpassede datasystemer&#39;</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">control.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The source-code of all functions in <a class="el" href="control_8h.html" title="A library including all the elements to control the elevator. This includes initialization, stop conditions, turning conditions and the final state machine for the complete system. To run the elevator with the worked functionality, call run_elevator_fsm in the main.c file and compile the project. ">control.h</a> and an enum for the states.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &quot;<a class="el" href="control_8h_source.html">control.h</a>&quot;</code><br />
<code>#include &quot;elev.h&quot;</code><br />
<code>#include &quot;<a class="el" href="orders_8h_source.html">orders.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="door_8h_source.html">door.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for control.c:</div>
<div class="dyncontent">
<div class="center"><img src="control_8c__incl.png" border="0" usemap="#source_2control_8c" alt=""/></div>
<map name="source_2control_8c" id="source_2control_8c">
</map>
</div>
</div>
<p><a href="control_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:adc6e5733fc3c22f0a7b2914188c49c90"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="control_8c.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a> { <br />
&#160;&#160;<a class="el" href="control_8c.html#adc6e5733fc3c22f0a7b2914188c49c90a0cb1b2c6a7db1f1084886c98909a3f36">INIT</a>, 
<a class="el" href="control_8c.html#adc6e5733fc3c22f0a7b2914188c49c90afd6a0e4343048b10646dd2976cc5ad18">IDLE</a>, 
<a class="el" href="control_8c.html#adc6e5733fc3c22f0a7b2914188c49c90a16ebdcb23eb5337fd5bc598fa8d6035d">MOVING</a>, 
<a class="el" href="control_8c.html#adc6e5733fc3c22f0a7b2914188c49c90a11915658ade106027bd75056b907539d">DOOR_OPEN</a>, 
<br />
&#160;&#160;<a class="el" href="control_8c.html#adc6e5733fc3c22f0a7b2914188c49c90a679ee5320d66c8322e310daeb2ee99b8">STOP</a>
<br />
 }<tr class="memdesc:adc6e5733fc3c22f0a7b2914188c49c90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enumerators for the various states of the final state machine.  <a href="control_8c.html#adc6e5733fc3c22f0a7b2914188c49c90">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:adc6e5733fc3c22f0a7b2914188c49c90"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a21d3c4937ea0797ee85d70f63553b297"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a21d3c4937ea0797ee85d70f63553b297"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="control_8c.html#a21d3c4937ea0797ee85d70f63553b297">init_movement</a> ()</td></tr>
<tr class="memdesc:a21d3c4937ea0797ee85d70f63553b297"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializez the elevator. Drives it from an undefined position, meaning one between two floors, to the first one below while not accepting any orders. If it is in a defined position this function does nothing. <br /></td></tr>
<tr class="separator:a21d3c4937ea0797ee85d70f63553b297"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58c1f80cba36d79137da067a8324b585"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="control_8c.html#a58c1f80cba36d79137da067a8324b585">should_i_stop</a> (int floor)</td></tr>
<tr class="memdesc:a58c1f80cba36d79137da067a8324b585"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the elevator, on the desired floor, fulfills any stop-conditions described in the functional requirement.  <a href="#a58c1f80cba36d79137da067a8324b585">More...</a><br /></td></tr>
<tr class="separator:a58c1f80cba36d79137da067a8324b585"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ad51495ccadd65ab9f88bb10d060b01"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6ad51495ccadd65ab9f88bb10d060b01"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="control_8c.html#a6ad51495ccadd65ab9f88bb10d060b01">stop_at_floor</a> ()</td></tr>
<tr class="memdesc:a6ad51495ccadd65ab9f88bb10d060b01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializez a stop at a floor. Stops the motor, opens the door and clears all orders at the floor. Uses current_floor set in should_i_stop. <br /></td></tr>
<tr class="separator:a6ad51495ccadd65ab9f88bb10d060b01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8fc63f9ecdbe9629f3a474bf19aabb0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab8fc63f9ecdbe9629f3a474bf19aabb0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="control_8c.html#ab8fc63f9ecdbe9629f3a474bf19aabb0">run_elevator_fsm</a> ()</td></tr>
<tr class="memdesc:ab8fc63f9ecdbe9629f3a474bf19aabb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs the elevator FSM with the 5 declared states. This is the only function one needs to call in <a class="el" href="main_8c_source.html">main.c</a>. <br /></td></tr>
<tr class="separator:ab8fc63f9ecdbe9629f3a474bf19aabb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a91fef3f23054f428342c0c39fbdcfade"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a91fef3f23054f428342c0c39fbdcfade"></a>
<a class="el" href="control_8c.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>&#160;</td><td class="memItemRight" valign="bottom"><b>current_state</b> = <a class="el" href="control_8c.html#adc6e5733fc3c22f0a7b2914188c49c90a0cb1b2c6a7db1f1084886c98909a3f36">INIT</a></td></tr>
<tr class="separator:a91fef3f23054f428342c0c39fbdcfade"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The source-code of all functions in <a class="el" href="control_8h.html" title="A library including all the elements to control the elevator. This includes initialization, stop conditions, turning conditions and the final state machine for the complete system. To run the elevator with the worked functionality, call run_elevator_fsm in the main.c file and compile the project. ">control.h</a> and an enum for the states. </p>

<p>Definition in file <a class="el" href="control_8c_source.html">control.c</a>.</p>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="adc6e5733fc3c22f0a7b2914188c49c90"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="control_8c.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enumerators for the various states of the final state machine. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="adc6e5733fc3c22f0a7b2914188c49c90a0cb1b2c6a7db1f1084886c98909a3f36"></a>INIT&#160;</td><td class="fielddoc">
<p>The initialization state of the final state machine. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="adc6e5733fc3c22f0a7b2914188c49c90afd6a0e4343048b10646dd2976cc5ad18"></a>IDLE&#160;</td><td class="fielddoc">
<p>The state of the elevator when it's standing still without orders. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="adc6e5733fc3c22f0a7b2914188c49c90a16ebdcb23eb5337fd5bc598fa8d6035d"></a>MOVING&#160;</td><td class="fielddoc">
<p>The state of the elevator when it's not standing still. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="adc6e5733fc3c22f0a7b2914188c49c90a11915658ade106027bd75056b907539d"></a>DOOR_OPEN&#160;</td><td class="fielddoc">
<p>The state of the elevator as it stops in a floor and opens the door. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="adc6e5733fc3c22f0a7b2914188c49c90a679ee5320d66c8322e310daeb2ee99b8"></a>STOP&#160;</td><td class="fielddoc">
<p>The state the elevator enters when the STOP-button is pressed. </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="control_8c_source.html#l00015">15</a> of file <a class="el" href="control_8c_source.html">control.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a58c1f80cba36d79137da067a8324b585"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int should_i_stop </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>floor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if the elevator, on the desired floor, fulfills any stop-conditions described in the functional requirement. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">floor</td><td>The desired floor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if stop conditions are not met on the spesific floor. 1 if any of them are met and the elevator is meant to stop. </dd></dl>

<p>Definition at line <a class="el" href="control_8c_source.html#l00041">41</a> of file <a class="el" href="control_8c_source.html">control.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
